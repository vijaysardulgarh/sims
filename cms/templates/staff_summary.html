{% extends "base.html" %}

{% block title %}Staff Summary{% endblock %}

{% block content %}
<div class="container mt-4 table-responsive">
    <h2 class="mb-4">Staff Summary - {{ school.name }}</h2>
   
    <table class="table table-bordered table-striped text-center align-middle">
        <thead class="table-dark">
            <tr>
                <th>Post Type</th>
                <th>Subject</th>
                <th>Sanctioned Posts</th>
                <th>Regular Working</th>
                <th>Vacant (Sanctioned - Regular)</th>
                <th>Guest Working</th>
                <th>HKRNL Working</th>
                <th>Net Vacancy</th>
                <th>Male Working</th>
                <th>Female Working</th>
            </tr>
        </thead>
        <tbody>
            {% regroup summary by post_type__name as grouped_summary %}

            {% for group in grouped_summary %}
                <!-- Post Type Header -->
                <tr class="table-secondary fw-bold">
                    <td colspan="10">{{ group.grouper }}</td>
                </tr>

                <!-- Subject-wise details -->
                {% for row in group.list %}
                <tr>
                    <td>{{ row.post_type__name }}</td>
                    <td>{{ row.subject__name }}</td>
                    <td>{{ row.sanctioned_posts }}</td>
                    <td>{{ row.regular_working }}</td>
                    <td>{{ row.vacant }}</td>
                    <td>{{ row.guest_working }}</td>
                    <td>{{ row.hkrnl_working }}</td>
                    <td>{{ row.net_vacancy }}</td>
                    <td>{{ row.male_working }}</td>
                    <td>{{ row.female_working }}</td>
                </tr>
                {% endfor %}
            {% empty %}
                <tr>
                    <td colspan="10">No staff data available.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
